/*
 * Fetch - A simple asset preloader
 * v1.0 - 3/13/2012
 * Copyright (c) 2012 Ethan Ransom
 * derethanhausen [at] gmail.com
 * Licensed under the MIT license
*/
var Fetch=(function(){var c=0;var m=0;var g={};var h={};var b={};var i=function(n,o){if(!b[n]){b[n]=[]}b[n].push(o)};var d=function(p,n){if(!b[p]){return}for(var o=0;o<b[p].length;o++){b[p][o](n)}};var e=function(){var n=(m/c);d("update",n);if(n>=1){d("done")}};var l=function(){m++;e()};var k=function(o){for(type in o){g[type]={};if(h[type]){for(var n=0;n<o[type].length;n++){g[type][o[type][n]]=h[type](o[type][n],l);c++}}else{throw new Error("No loader for type: "+type)}}e()};var j=function(o,n){h[o]=n};var f=function(o,n){a=false;try{a=g[o][n];if(!a){throw"Asset not in cache!"}}catch(p){if(!h[o]){throw new Error("No loader for type: "+o)}a=h[o](n,function(){});console.log(p+" Loaded fresh: "+n)}return a};return{load:k,loader:j,asset:f,on:i}})();Fetch.loader("image",function(c,d){var b=new Image();b.onload=d;b.src=c;return b});Fetch.loader("script",function(c,e){var d=document.getElementsByTagName("head")[0];var b=document.createElement("script");b.type="text/javascript";b.onreadystatechange=function(){if(this.readyState==="complete"){e()}};b.onload=e;b.src=c;d.appendChild(b);return true});